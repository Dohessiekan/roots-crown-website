(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[376],{1471:(e,t,a)=>{"use strict";a.d(t,{A:()=>o});var s=a(7876),l=a(8230),r=a.n(l),n=a(4232);function o(){let[e,t]=(0,n.useState)(!1);return(0,s.jsx)("nav",{className:"fixed w-full z-50 bg-pure-white shadow-soft",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto px-6 lg:px-24",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center h-20",children:[(0,s.jsx)("div",{className:"flex items-center",children:(0,s.jsxs)(r(),{href:"/",className:"flex items-center space-x-3",children:[(0,s.jsx)("div",{className:"w-10 h-10 bg-primary rounded-full flex items-center justify-center",children:(0,s.jsx)("span",{className:"text-accent text-xl font-bold",children:"\uD83D\uDC51"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-xl font-heading font-bold text-primary",children:"Roots & Crown"}),(0,s.jsx)("p",{className:"text-xs text-text-dark opacity-75",children:"Kigali Beauty Lounge"})]})]})}),(0,s.jsxs)("div",{className:"hidden md:flex items-center space-x-16",children:[(0,s.jsx)(r(),{href:"/",className:"font-serif font-medium text-gray-800 hover:text-green-700 transition-colors",children:"Home"}),(0,s.jsx)(r(),{href:"/services",className:"font-serif font-medium text-text-dark hover:text-primary transition-colors",children:"Services"}),(0,s.jsx)(r(),{href:"/contact",className:"font-serif font-medium text-text-dark hover:text-primary transition-colors",children:"Contact"})]}),(0,s.jsx)("div",{className:"hidden md:block",children:(0,s.jsx)(r(),{href:"/services",className:"btn-secondary px-6 py-3 rounded-lg font-body font-light border-none",style:{backgroundColor:"#C49B38",color:"#fff"},children:"Book Now"})}),(0,s.jsx)("div",{className:"md:hidden",children:(0,s.jsx)("button",{onClick:()=>t(!e),className:"p-2 rounded-md text-text-dark",children:(0,s.jsx)("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e?(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"}):(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})})]}),e&&(0,s.jsx)("div",{className:"md:hidden bg-pure-white border-t border-secondary",children:(0,s.jsxs)("div",{className:"px-2 pt-2 pb-3 space-y-1",children:[(0,s.jsx)(r(),{href:"/",className:"block px-3 py-2 text-gray-800 hover:text-green-700 font-serif",onClick:()=>t(!1),children:"Home"}),(0,s.jsx)(r(),{href:"/services",className:"block px-3 py-2 text-text-dark hover:text-primary font-serif",onClick:()=>t(!1),children:"Services"}),(0,s.jsx)(r(),{href:"/contact",className:"block px-3 py-2 text-text-dark hover:text-primary font-serif",onClick:()=>t(!1),children:"Contact"}),(0,s.jsx)("div",{className:"px-3 py-2",children:(0,s.jsx)(r(),{href:"/services",className:"btn-secondary w-full text-center py-2 px-4 rounded-lg font-serif font-extralight border-none",style:{backgroundColor:"#C49B38",color:"#fff"},onClick:()=>t(!1),children:"Book Now"})})]})})]})})}},1599:(e,t,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/staff/[id]",function(){return a(7178)}])},7178:(e,t,a)=>{"use strict";a.r(t),a.d(t,{__N_SSP:()=>i,default:()=>c});var s=a(7876),l=a(9099),r=a(4232),n=a(1471),o=a(1325),i=!0;function c(e){var t;let{staff:a}=e,i=(0,l.useRouter)(),[c,d]=(0,r.useState)(()=>{let e=new Date;return e.setDate(e.getDate()+1),e.toISOString().split("T")[0]}),[x,m]=(0,r.useState)(null),[h,f]=(0,r.useState)(""),[u,p]=(0,r.useState)({name:"",email:"",phone:"",notes:""}),[g,b]=(0,r.useState)(!1),[v,j]=(0,r.useState)(!1),[y,N]=(0,r.useState)([]),[w,k]=(0,r.useState)(!1),[C,S]=(0,r.useState)([]),[D,A]=(0,r.useState)(!0);(0,r.useEffect)(()=>{c&&(null==a?void 0:a.id)&&_()},[c,null==a?void 0:a.id]),(0,r.useEffect)(()=>{(null==a?void 0:a.id)&&B()},[null==a?void 0:a.id]);let B=async()=>{A(!0);try{let e=await fetch("/api/staff/".concat(a.id,"/feedback"));if(e.ok){let t=await e.json();S(t.feedbacks)}else console.error("Failed to fetch feedback"),S([])}catch(e){console.error("Error fetching feedback:",e),S([])}finally{A(!1)}},_=async()=>{k(!0),m(null);try{let e=await fetch("/api/availability/".concat(a.id,"?date=").concat(c));if(e.ok){let t=await e.json();N(t.availableSlots)}else N([])}catch(e){console.error("Error fetching available slots:",e),N([])}finally{k(!1)}};if(!a)return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.A,{}),(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center pt-20",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Staff Member Not Found"}),(0,s.jsx)("button",{onClick:()=>i.push("/services"),className:"bg-green-600 text-white px-6 py-2 rounded-md hover:bg-green-700",children:"Back to Services"})]})}),(0,s.jsx)(o.A,{})]});let E=async e=>{if(e.preventDefault(),!x||!h)return void alert("Please select a service and time");b(!0);try{let e={serviceId:h,staffId:a.id,customerName:u.name,customerEmail:u.email,customerPhone:u.phone,appointmentDate:c,appointmentTime:x,notes:u.notes},l=await fetch("/api/bookings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(l.ok){var t,s;let e=await l.json();j(!0),await _();let r=null==(t=a.staffServices)?void 0:t.find(e=>{var t;return(null==(t=e.service)?void 0:t.id)===h}),n=(null==r||null==(s=r.service)?void 0:s.name)||"Service";setTimeout(()=>{i.push("/book/".concat(e.id,"/confirm?service=").concat(encodeURIComponent(n),"&staff=").concat(encodeURIComponent(a.name),"&date=").concat(encodeURIComponent(c),"&time=").concat(encodeURIComponent(x),"&bookingId=").concat(e.bookingId))},2e3);return}{let e=await l.json();alert("Booking failed: ".concat(e.message))}}catch(e){console.error("Booking error:",e),alert("An error occurred while booking. Please try again.")}finally{b(!1)}},P=e=>{let{name:t,value:a}=e.target;p(e=>({...e,[t]:a}))};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.A,{}),(0,s.jsx)("div",{className:"w-full px-4 sm:px-8 md:px-16 lg:px-24 pt-[75px] pb-10",children:(0,s.jsxs)("nav",{className:"flex flex-wrap items-center gap-2 text-base font-body bg-transparent py-8 px-0",children:[(0,s.jsx)("button",{onClick:()=>i.push("/services"),className:"hover:underline flex items-center text-gray-700 font-normal",children:"Services"}),(0,s.jsx)("span",{className:"mx-2 text-gray-500",children:">"}),(0,s.jsx)("span",{className:"text-gray-700 font-normal",children:"Staff"}),(0,s.jsx)("span",{className:"mx-2 text-gray-500",children:">"}),(0,s.jsx)("span",{className:"text-gray-900 font-normal",children:a.name})]})}),(0,s.jsxs)("div",{className:"w-full flex flex-col md:flex-row items-center md:items-start justify-center py-8 md:py-12 gap-6 md:gap-16 lg:gap-24 px-4 sm:px-8 md:px-16 lg:px-24",children:[(0,s.jsx)("div",{className:"flex flex-col items-center md:items-start w-full md:w-auto",children:(0,s.jsx)("div",{className:"flex-shrink-0 w-40 h-40 md:w-56 md:h-56 rounded-[5px] overflow-hidden bg-gray-100 shadow-md flex items-center justify-center",children:(0,s.jsx)("img",{src:a.image||"/images/staffProfile.svg",alt:a.name,className:"w-full h-full object-cover"})})}),(0,s.jsxs)("div",{className:"flex flex-col items-center md:items-start max-w-xl mt-8 md:mt-0 text-center md:text-left",children:[(0,s.jsx)("h1",{className:"text-2xl md:text-3xl lg:text-4xl font-montaga text-gray-900 mb-4",children:a.name}),(0,s.jsx)("h2",{className:"text-base md:text-lg lg:text-xl font-lato text-green-700 font-semibold mb-4",children:a.title}),(0,s.jsx)("p",{className:"font-lato text-sm md:text-base lg:text-lg text-gray-600 mb-2 whitespace-pre-line",children:a.bio}),a.email&&(0,s.jsxs)("p",{className:"font-lato text-sm text-gray-500 mb-1",children:["\uD83D\uDCE7 ",a.email]}),a.phone&&(0,s.jsxs)("p",{className:"font-lato text-sm text-gray-500 mb-4",children:["\uD83D\uDCDE ",a.phone]})]})]}),(0,s.jsx)("div",{className:"w-full flex flex-col items-center justify-center pb-12 gap-8 px-4 sm:px-8 md:px-16 lg:px-24",children:(0,s.jsxs)("div",{className:"flex-1 flex flex-col items-center",children:[(0,s.jsx)("h3",{className:"text-2xl md:text-3xl font-montaga text-gray-900 mb-3",children:"Rating"}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("span",{className:"text-lg md:text-xl font-montaga font-normal text-gray-900 mr-3",children:a.rating?a.rating.toFixed(1):"New"}),(0,s.jsx)("div",{className:"flex gap-1",children:[1,2,3,4,5].map(e=>(0,s.jsx)("span",{className:"text-xl md:text-2xl ".concat(a.rating&&e<=Math.round(a.rating)?"text-yellow-500":"text-gray-300"),children:"★"},e))})]}),a.reviewCount&&a.reviewCount>0&&(0,s.jsxs)("p",{className:"font-lato text-sm text-gray-500 mt-1",children:["Based on ",a.reviewCount," reviews"]})]})}),(0,s.jsx)("div",{className:"w-full px-4 sm:px-8 md:px-16 lg:px-24 pb-12",children:(0,s.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,s.jsx)("h3",{className:"text-2xl md:text-3xl font-montaga text-gray-900 mb-6",children:"Book an Appointment"}),(0,s.jsxs)("form",{onSubmit:E,className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block font-lato text-base text-gray-700 mb-2",children:"Select Service"}),(0,s.jsxs)("select",{value:h,onChange:e=>f(e.target.value),className:"w-full border border-gray-300 rounded-md outline-none bg-white text-gray-900 font-lato text-base p-3",required:!0,children:[(0,s.jsx)("option",{value:"",children:"Choose a service..."}),null==(t=a.staffServices)?void 0:t.map(e=>{var t,a,l,r;return(0,s.jsxs)("option",{value:null==(t=e.service)?void 0:t.id,children:[null==(a=e.service)?void 0:a.name," - ",null==(l=e.service)?void 0:l.price]},null==(r=e.service)?void 0:r.id)})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block font-lato text-base text-gray-700 mb-2",children:"Date"}),(0,s.jsx)("input",{type:"date",value:c,onChange:e=>d(e.target.value),min:new Date().toISOString().split("T")[0],className:"w-full border border-gray-300 rounded-md outline-none bg-white text-gray-900 font-lato text-base p-3",required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block font-lato text-base text-gray-700 mb-2",children:["Available Times",w&&(0,s.jsx)("span",{className:"text-sm text-gray-500 ml-2",children:"(Loading...)"})]}),w?(0,s.jsx)("div",{className:"grid grid-cols-4 gap-2 max-h-32 overflow-y-auto",children:[1,2,3,4,5,6,7,8].map(e=>(0,s.jsx)("div",{className:"px-2 py-2 text-sm border rounded-md bg-gray-100 animate-pulse h-8"},e))}):y.length>0?(0,s.jsx)("div",{className:"grid grid-cols-4 gap-2 max-h-32 overflow-y-auto",children:y.map(e=>(0,s.jsx)("button",{type:"button",className:"px-2 py-2 text-sm border rounded-md font-lato transition ".concat(x===e?"border-green-600 bg-green-100 text-green-800":"border-gray-300 bg-white text-gray-900 hover:border-green-600"),onClick:()=>m(e),children:(e=>{let[t,a]=e.split(":"),s=parseInt(t);return"".concat(s%12||12,":").concat(a," ").concat(s>=12?"PM":"AM")})(e)},e))}):(0,s.jsx)("div",{className:"text-gray-500 text-sm py-4 text-center border border-gray-200 rounded-md",children:"No available time slots for this date. Please select another date."})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsx)("input",{type:"text",name:"name",placeholder:"Full Name",value:u.name,onChange:P,className:"w-full border border-gray-300 rounded-md outline-none bg-white text-gray-900 font-lato text-base p-3",required:!0}),(0,s.jsx)("input",{type:"email",name:"email",placeholder:"Email Address",value:u.email,onChange:P,className:"w-full border border-gray-300 rounded-md outline-none bg-white text-gray-900 font-lato text-base p-3",required:!0})]}),(0,s.jsx)("input",{type:"tel",name:"phone",placeholder:"Phone Number",value:u.phone,onChange:P,className:"w-full border border-gray-300 rounded-md outline-none bg-white text-gray-900 font-lato text-base p-3",required:!0}),(0,s.jsx)("textarea",{name:"notes",placeholder:"Additional Notes (Optional)",value:u.notes,onChange:P,rows:4,className:"w-full border border-gray-300 rounded-md outline-none bg-white text-gray-900 font-lato text-base p-3 resize-none"}),(0,s.jsx)("button",{type:"submit",disabled:g||!x||!h||v,className:"w-full md:w-auto px-8 py-3 rounded-md font-lato text-base transition ".concat(g||!x||!h||v?"bg-gray-400 text-gray-600 cursor-not-allowed":"bg-[#C7A15A] text-white hover:bg-[#b38d46]"),children:v?"✅ Booking Successful!":g?"Processing Booking...":"Book Appointment"}),v&&(0,s.jsx)("div",{className:"w-full md:w-auto px-6 py-3 bg-green-100 border border-green-400 text-green-700 rounded-md text-center",children:(0,s.jsxs)("p",{className:"font-lato text-base",children:["✅ Booking confirmed! The selected time slot has been removed from availability.",(0,s.jsx)("br",{}),(0,s.jsx)("span",{className:"text-sm",children:"Redirecting to confirmation page..."})]})})]})]})}),(0,s.jsx)("div",{className:"w-full flex flex-row items-stretch justify-between pb-12 gap-8 md:gap-24 px-4 sm:px-8 md:px-16 lg:px-24",children:(0,s.jsxs)("div",{className:"flex-1 flex flex-col items-start",children:[(0,s.jsx)("h3",{className:"text-2xl md:text-3xl font-montaga text-gray-900 mb-3",children:"Customer Feedback"}),D?(0,s.jsx)("div",{className:"w-full max-w-2xl flex flex-col gap-6",children:[1,2,3].map(e=>(0,s.jsxs)("div",{className:"flex flex-row items-start gap-4 w-full animate-pulse",children:[(0,s.jsx)("div",{className:"w-12 h-12 rounded-full bg-gray-300"}),(0,s.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,s.jsx)("div",{className:"h-4 bg-gray-300 rounded mb-2 w-3/4"}),(0,s.jsx)("div",{className:"h-3 bg-gray-300 rounded w-1/2"})]})]},e))}):C.length>0?(0,s.jsx)("div",{className:"w-full max-w-2xl flex flex-col gap-6",children:C.map((e,t)=>{let a=["bg-[#C7A15A]","bg-green-600","bg-blue-500","bg-pink-500","bg-purple-500","bg-red-400"],l=a[t%a.length],r=new Date(e.date).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return(0,s.jsxs)("div",{className:"flex flex-row items-start gap-4 w-full",children:[(0,s.jsx)("div",{className:"w-12 h-12 rounded-full flex items-center justify-center text-white text-xl font-bold ".concat(l),children:e.customerName.charAt(0)}),(0,s.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,s.jsx)("div",{className:"flex gap-1",children:[1,2,3,4,5].map(t=>(0,s.jsx)("span",{className:"text-sm ".concat(t<=e.rating?"text-yellow-500":"text-gray-300"),children:"★"},t))}),(0,s.jsxs)("span",{className:"text-sm text-gray-600",children:["• ",e.serviceName]})]}),e.comment&&(0,s.jsx)("div",{className:"font-lato text-base text-gray-900 mb-1",children:e.comment}),(0,s.jsxs)("div",{className:"flex flex-row justify-between text-sm text-gray-500 font-lato",children:[(0,s.jsx)("span",{children:e.customerName}),(0,s.jsx)("span",{children:r})]})]})]},e.id)})}):(0,s.jsxs)("div",{className:"w-full max-w-2xl text-center py-8 text-gray-500",children:[(0,s.jsx)("p",{className:"font-lato text-base",children:"No customer feedback yet."}),(0,s.jsx)("p",{className:"font-lato text-sm mt-2",children:"Be the first to share your experience!"})]})]})}),(0,s.jsx)(o.A,{})]})}},9099:(e,t,a)=>{e.exports=a(4294)}},e=>{e.O(0,[230,325,636,593,792],()=>e(e.s=1599)),_N_E=e.O()}]);