(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[918],{303:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"AmpStateContext",{enumerable:!0,get:function(){return r}});let r=a(4252)._(a(4232)).default.createContext({})},2340:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>i});var r=a(7876),l=a(4232),s=a(7328),n=a.n(s);function i(){let[e,t]=(0,l.useState)([]),[a,s]=(0,l.useState)([]),[i,d]=(0,l.useState)(null),[o,c]=(0,l.useState)(""),[u,m]=(0,l.useState)(!1),[f,p]=(0,l.useState)("");(0,l.useEffect)(()=>{h(),g()},[]);let h=async()=>{try{let e=await fetch("/api/staff/all"),a=await e.json();t(a)}catch(e){console.error("Error fetching staff:",e)}},g=async()=>{try{let e=await fetch("/api/images/list"),t=await e.json();s(t.images||[])}catch(e){console.error("Error fetching images:",e)}},x=async e=>{if(e.preventDefault(),!i||!o)return void p("Please select both a file and a staff member");m(!0),p("");try{let e=new FormData;e.append("image",i),e.append("staffId",o);let t=await fetch("/api/upload",{method:"POST",body:e}),a=await t.json();t.ok?(p("✅ Image uploaded successfully! Path: ".concat(a.imagePath)),d(null),c(""),g(),setTimeout(()=>{p('✅ Upload complete! Now go to Prisma Studio:\n1. Open http://localhost:5555\n2. Go to Staff table\n3. Find staff member "'.concat(o,'"\n4. Edit their record\n5. Add this path to image field: ').concat(a.imagePath))},1e3)):p("❌ Upload failed: ".concat(a.message))}catch(e){p("❌ Upload error: ".concat(e))}finally{m(!1)}};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n(),{children:(0,r.jsx)("title",{children:"Staff Image Uploader - Prisma Studio Helper"})}),(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,r.jsxs)("div",{className:"max-w-4xl mx-auto px-4",children:[(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-8",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Staff Image Uploader"}),(0,r.jsx)("p",{className:"text-gray-600 mb-6",children:"Upload images for staff members, then use the paths in Prisma Studio"}),(0,r.jsxs)("form",{onSubmit:x,className:"space-y-6",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Staff Member"}),(0,r.jsxs)("select",{value:o,onChange:e=>c(e.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-500",required:!0,children:[(0,r.jsx)("option",{value:"",children:"Choose a staff member..."}),e.map(e=>(0,r.jsxs)("option",{value:e.id,children:[e.id," - ",e.name]},e.id))]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Image File"}),(0,r.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{var t;return d((null==(t=e.target.files)?void 0:t[0])||null)},className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-500",required:!0}),i&&(0,r.jsxs)("p",{className:"text-sm text-green-600 mt-1",children:["Selected: ",i.name," (",(i.size/1024/1024).toFixed(2)," MB)"]})]})]}),(0,r.jsx)("button",{type:"submit",disabled:u||!i||!o,className:"w-full bg-blue-600 text-white py-3 px-6 rounded-md hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed",children:u?"Uploading...":"Upload Image"})]}),f&&(0,r.jsx)("div",{className:"mt-4 p-4 bg-blue-50 border border-blue-200 rounded-md",children:(0,r.jsx)("pre",{className:"text-sm text-blue-800 whitespace-pre-wrap",children:f})})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Current Staff Images"}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:a.map(e=>(0,r.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,r.jsx)("div",{className:"mb-3",children:(0,r.jsx)("img",{src:e.imagePath,alt:"Staff ".concat(e.staffId),className:"w-full h-32 object-cover rounded-md"})}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("h3",{className:"font-semibold text-gray-900",children:["Staff ID: ",e.staffId]}),(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:["File: ",e.filename]}),(0,r.jsx)("div",{className:"bg-gray-50 p-2 rounded text-xs font-mono",children:e.imagePath}),(0,r.jsx)("button",{onClick:()=>{var t;return t=e.imagePath,void(navigator.clipboard.writeText(t),p("\uD83D\uDCCB Copied to clipboard: ".concat(t)))},className:"w-full bg-green-600 text-white py-1 px-3 rounded text-sm hover:bg-green-700",children:"\uD83D\uDCCB Copy Path for Prisma Studio"})]})]},e.filename))}),0===a.length&&(0,r.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,r.jsx)("p",{children:"No staff images uploaded yet."}),(0,r.jsx)("p",{className:"text-sm",children:"Use the form above to upload your first image!"})]})]}),(0,r.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-6 mt-8",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-yellow-800 mb-3",children:"\uD83D\uDCCB How to use with Prisma Studio:"}),(0,r.jsxs)("ol",{className:"list-decimal list-inside space-y-2 text-yellow-700",children:[(0,r.jsx)("li",{children:"Upload an image using the form above"}),(0,r.jsxs)("li",{children:["Copy the image path (e.g., ",(0,r.jsx)("code",{children:"/images/staff/sarah.jpg"}),")"]}),(0,r.jsxs)("li",{children:["Open Prisma Studio at ",(0,r.jsx)("a",{href:"http://localhost:5555",target:"_blank",className:"underline",children:"http://localhost:5555"})]}),(0,r.jsxs)("li",{children:["Go to the ",(0,r.jsx)("strong",{children:"Staff"})," table"]}),(0,r.jsxs)("li",{children:["Find your staff member and click ",(0,r.jsx)("strong",{children:"Edit"})]}),(0,r.jsxs)("li",{children:["Paste the image path into the ",(0,r.jsx)("strong",{children:"image"})," field"]}),(0,r.jsxs)("li",{children:["Click ",(0,r.jsx)("strong",{children:"Save"})]}),(0,r.jsx)("li",{children:"✅ The image will now appear on your booking pages!"})]})]})]})})]})}},3776:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n}});let r=a(4232),l=r.useLayoutEffect,s=r.useEffect;function n(e){let{headManager:t,reduceComponentsToState:a}=e;function n(){if(t&&t.mountedInstances){let l=r.Children.toArray(Array.from(t.mountedInstances).filter(Boolean));t.updateHead(a(l,e))}}return l(()=>{var a;return null==t||null==(a=t.mountedInstances)||a.add(e.children),()=>{var a;null==t||null==(a=t.mountedInstances)||a.delete(e.children)}}),l(()=>(t&&(t._pendingUpdate=n),()=>{t&&(t._pendingUpdate=n)})),s(()=>(t&&t._pendingUpdate&&(t._pendingUpdate(),t._pendingUpdate=null),()=>{t&&t._pendingUpdate&&(t._pendingUpdate(),t._pendingUpdate=null)})),null}},5679:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var a in t)Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}(t,{default:function(){return h},defaultHead:function(){return u}});let r=a(4252),l=a(8365),s=a(7876),n=l._(a(4232)),i=r._(a(3776)),d=a(303),o=a(8831),c=a(6807);function u(e){void 0===e&&(e=!1);let t=[(0,s.jsx)("meta",{charSet:"utf-8"},"charset")];return e||t.push((0,s.jsx)("meta",{name:"viewport",content:"width=device-width"},"viewport")),t}function m(e,t){return"string"==typeof t||"number"==typeof t?e:t.type===n.default.Fragment?e.concat(n.default.Children.toArray(t.props.children).reduce((e,t)=>"string"==typeof t||"number"==typeof t?e:e.concat(t),[])):e.concat(t)}a(6079);let f=["name","httpEquiv","charSet","itemProp"];function p(e,t){let{inAmpMode:a}=t;return e.reduce(m,[]).reverse().concat(u(a).reverse()).filter(function(){let e=new Set,t=new Set,a=new Set,r={};return l=>{let s=!0,n=!1;if(l.key&&"number"!=typeof l.key&&l.key.indexOf("$")>0){n=!0;let t=l.key.slice(l.key.indexOf("$")+1);e.has(t)?s=!1:e.add(t)}switch(l.type){case"title":case"base":t.has(l.type)?s=!1:t.add(l.type);break;case"meta":for(let e=0,t=f.length;e<t;e++){let t=f[e];if(l.props.hasOwnProperty(t))if("charSet"===t)a.has(t)?s=!1:a.add(t);else{let e=l.props[t],a=r[t]||new Set;("name"!==t||!n)&&a.has(e)?s=!1:(a.add(e),r[t]=a)}}}return s}}()).reverse().map((e,t)=>{let a=e.key||t;return n.default.cloneElement(e,{key:a})})}let h=function(e){let{children:t}=e,a=(0,n.useContext)(d.AmpStateContext),r=(0,n.useContext)(o.HeadManagerContext);return(0,s.jsx)(i.default,{reduceComponentsToState:p,headManager:r,inAmpMode:(0,c.isInAmpMode)(a),children:t})};("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},6807:(e,t)=>{"use strict";function a(e){let{ampFirst:t=!1,hybrid:a=!1,hasQuery:r=!1}=void 0===e?{}:e;return t||a&&r}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"isInAmpMode",{enumerable:!0,get:function(){return a}})},7328:(e,t,a)=>{e.exports=a(5679)},7960:(e,t,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/image-uploader",function(){return a(2340)}])}},e=>{e.O(0,[636,593,792],()=>e(e.s=7960)),_N_E=e.O()}]);